main.py

import logging import yfinance as yf from telegram import Bot from telegram.error import TelegramError import datetime

Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª

BOT_TOKEN = "Ø¶Ø¹_ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª_Ù‡Ù†Ø§" CHAT_ID = "Ø¶Ø¹_Ù…Ø¹Ø±Ù_Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©_Ù‡Ù†Ø§"

bot = Bot(token=BOT_TOKEN) logging.basicConfig(level=logging.INFO)

Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·

def analyze_us500(): try: ticker = yf.Ticker("^GSPC")  # US500 / SPX hist = ticker.history(period="1d", interval="5m")

if hist.empty:
        return "âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹."

    latest = hist.iloc[-1]
    price = latest["Close"]

    message = f"ğŸ“Š US500 Analysis\n\nØ§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: {price:.2f} \nØ§Ù„ØªØ§Ø±ÙŠØ®: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M')}"
    return message

except Exception as e:
    logging.error(f"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„: {e}")
    return "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„."

Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©

try: analysis = analyze_us500() bot.send_message(chat_id=CHAT_ID, text=analysis) logging.info("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­.") except TelegramError as te: logging.error(f"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…: {te}") except Exception as e: logging.error(f"Ø®Ø·Ø£ Ø¹Ø§Ù…: {e}")

